1. node.js 설치와 간단한 사용법
node.js : javascript runtime 
runtime : 프로그램이 실행되고 있을때 존재하는 곳, 프로그래밍 언어가 구동되는 환경.

node.js의 등장으로 JS가 브라우저에만 국한되는것이 아니게 되었음.


[node 파일명.확장자] 형태로 실행 가능 (ex. node index.js)


터미널에 node 만 입력하여 실행시 node 런타임이 실행됨.
(취소 : ctrl + c)






2. koa 사용법
express 팀의 새로운 프레임 워크.
koa는 express와 달리 async와 await를 지원한다. -> call-back에서 자유롭고 코드가 간결하다.
(express는 async와 await를 지원하지 않기에 permit 처리시 call-back을 사용.)

koa 설치. -> npm install koa

src/index.js 에 koa code 작성
node src로 실행.

브라우저로 localhost:3000으로 접속하여 결과확인.
ctrl + c로 node runtime 종료.


nodemon ( npm install -g nodemon )
디렉터리에서 파일 변경이 감지될 때 node 응용 프로그램을 자동으로 다시 시작하여 node.js 기반 응용 프로그램을 개발하는 데 도움이 되는 도구이다.

nodemon --watch src/ src 명령으로 구동시
자동으로 코드 변화를 확인하는것을 터미널에서 확인 할 수 있다.
(현재 단계에서는 브라우저 페이지 refresh가 필요하다.)

node를 start시 nodemon 사용을 위해 [npm init] 명령으로 package.json 생성 (모두 enter)
package.json의 script 부분에 start 구문 작성.

앞으로는 npm start로 node runtime을 구동 할 수 있다.



koa는 middleware 함수의 실행으로 이루어져 있다. 
index.js에서 작성한 app.use에서 use라는 함수는 인자로 받은 함수를 app의 middleware 배열에 등록을 해준다.

middleware 배열에 있는 함수를 배열의 첫요소부터 차례로 실행해주는것이 koa framework의 특징이다.

middleware 배열에 들어간 함수는 ctx와 next라는 인자를 가지고 있다.
ctx는 요청 하나에대한 context를 나타내며, next는 다음 middleware 함수를 나타낸다.
Promise를 return한다.

함수는 등록된 순서대로 위에서 아래로 실행된다.

크롬 개발자 도구 (ctrl+shift+i) network 탭의 localhost -> Response Headers(응답헤더)에서 ctx.set을 통한 Header: ID를 확인할 수 있다.
터미널에서도 순차실행결과를 확인할 수 있다.
(대부분의 브라우저는 /favicon.ico를 호출하기 위해 한 번 더 같은 url을 호출하기 때문에 2번 출력될 수 있다.)













koa ( npm install koa )
koa-router ( npm install --save koa-router )
dotenv ( npm install dotenv )
knex ( npm install knex --save )
mysql ( npm install mysql )


cors ( npm install @koa/cors --save )
Cross Origin Resource Sharing 의 약자로 서로 다른 도메인에서 리소스를 요청하게 되면 보안상의 이유로 교차 출저 HTTP 요청을 제한하는것이다.



koabody ( npm install koa-body )
글을 요청 및 수정시 POST 요청을 사용.
client에서 보낸 데이터를 쉽게 parsing 해서 가져올수 있게 함.



